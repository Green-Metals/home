<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>t2_processing-pathways – Critical Raw Materials Knowledge Hub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html-6b66b95abd978ad436a633db2cf312ca.min.css" rel="stylesheet" append-hash="true" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../../styles/site.css">
</head>

<body>




<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#t2-processing-pathways" id="toc-t2-processing-pathways">02 T2 Processing Pathways</a>
  <ul>
  <li><a href="#t2.-processing-pathways-across-primarysecondary-feeds-and-co-products" id="toc-t2.-processing-pathways-across-primarysecondary-feeds-and-co-products">T2. Processing Pathways Across Primary/Secondary Feeds and Co-products</a>
  <ul>
  <li><a href="#t2.1-midstream-resilience-and-competitiveness-is-a-high-leverage-bottleneck" id="toc-t2.1-midstream-resilience-and-competitiveness-is-a-high-leverage-bottleneck">T2.1 Midstream resilience and competitiveness is a high-leverage bottleneck</a></li>
  <li><a href="#t2.2-circular-copper-and-alloy-loops-are-a-high-leverage-capability-wedge" id="toc-t2.2-circular-copper-and-alloy-loops-are-a-high-leverage-capability-wedge">T2.2 Circular copper and alloy loops are a high-leverage capability wedge</a></li>
  <li><a href="#t2.3-research-missions-and-work-packages" id="toc-t2.3-research-missions-and-work-packages">T2.3 Research missions and work packages</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
<h1 id="t2-processing-pathways">02 T2 Processing Pathways</h1>
<ul>
<li>Primary topic ID: <code>T2</code></li>
</ul>
<h2 id="t2.-processing-pathways-across-primarysecondary-feeds-and-co-products" class="anchored">T2. Processing Pathways Across Primary/Secondary Feeds and Co-products</h2>
<p>This section states hypotheses that structure the mission design and clarify what evidence is required to refine the program.</p>
<h3 id="t2.1-midstream-resilience-and-competitiveness-is-a-high-leverage-bottleneck" class="anchored">T2.1 Midstream resilience and competitiveness is a high-leverage bottleneck</h3>
<p>Hypothesis: A large share of Australia’s value-capture leverage sits in midstream competitiveness, defined as the ability to process varied feeds, manage impurities, deliver consistent product quality, and decarbonise without losing reliability.</p>
<p>Logic chain (why this follows from the facts): Midstream is where feed complexity becomes operational reality. Impurities and penalty elements are not abstract; they influence concentrate value, negotiated terms, and operability constraints <span class="citation" data-cites="lane-2016">(D. J. Lane et al., 2016, 2)</span>. When domestic midstream nodes are few and strategically important, research that improves predictability (impurity transfer functions, operating windows) and decarbonisation realism (abatement curves under reliability constraints) has high partner pull.</p>
<h3 id="t2.2-circular-copper-and-alloy-loops-are-a-high-leverage-capability-wedge" class="anchored">T2.2 Circular copper and alloy loops are a high-leverage capability wedge</h3>
<p>Hypothesis: Additional value capture can be created by upgrading complex secondary copper domestically into specification-compliant feed and products, avoiding downcycling.</p>
<p>Logic chain (why this follows from the facts): Secondary feeds can be copper-rich (for example, PCBs reaching <strong>20-25%</strong> copper) <span class="citation" data-cites="yang-2024">(F. Yang et al., 2024, 4)</span>, but they are heterogeneous and contamination-sensitive. Route choices therefore dominate outcomes, including decarbonisation tradeoffs <span class="citation" data-cites="torrubia-2024">(J. Torrubia et al., 2024, 1, 7–8)</span>. Even when process routes appear “low carbon”, comparative results and scenario studies show strong sensitivity to inventory boundaries and electricity transitions <span class="citation" data-cites="wu-2025">(X. Wu et al., 2025, 7, 9)</span>. This implies that circular value capture requires explicit route selection logic, contamination management, and measurement protocols rather than generic “recycling is better” claims.</p>
<h3 id="t2.3-research-missions-and-work-packages" class="anchored">T2.3 Research missions and work packages</h3>
<p>This section describes the research program as two missions with work packages. The emphasis is on explainable logic and on outputs that can be validated in labs and pilots with industry partners.</p>
<h4 id="mission-a-low-carbon-high-resilience-copper-processing-and-refining-midstream" class="anchored">Mission A: Low-carbon, high-resilience copper processing and refining (midstream)</h4>
<p>Mission A targets predictable and competitive processing under tighter constraints (impurities, energy and carbon, quality, and reliability). The work packages are designed so that a university can generate publishable science while producing partner-usable tools (models, protocols, operating windows).</p>
<h4 id="wp-a1.-impurities-and-penalty-elements-prediction-control-and-removal" class="anchored">WP-A1. Impurities and penalty elements (prediction, control, and removal)</h4>
<p>Penalty elements and impurity suites influence both concentrate value and the operational envelope of downstream processing <span class="citation" data-cites="lane-2016">(D. J. Lane et al., 2016, 2)</span>. The objective of WP-A1 is to turn this constraint into a predictive capability: Australia-relevant impurity behavior models and operating windows that can be used for blending, feed acceptance, and pre-treatment decisions.</p>
<p>Scientific 101 pointers: <code>T3.3</code> (impurities) and <code>T3.1</code> (where impurities end up in midstream routes).</p>
<ul>
<li>Core questions: how do As/Sb/Bi/halides and other suites partition into matte/slag/gas/residues and propagate into anode/cathode quality risk under realistic blend families?</li>
<li>Partner inputs: representative blend compositions; penalty thresholds and quality limits; operational boundary conditions (recycles, dust handling, key constraints).</li>
<li>Deliverables: impurity transfer functions; documented operating windows; a simple blend-decision prototype and a publishable impurity dataset.</li>
<li>Validation pathway: bench experiments + partner data reconciliation -&gt; one pilotable measurement protocol for a partner-relevant impurity suite.</li>
</ul>
<h4 id="wp-a2.-retrofit-decarbonisation-pathways-unit-operation-abatement-under-constraints" class="anchored">WP-A2. Retrofit decarbonisation pathways (unit-operation abatement under constraints)</h4>
<p>Decarbonisation options in midstream are often evaluated in general terms. The research need is to quantify plausible retrofit pathways at the unit-operation level and to make explicit the reliability and quality constraints that limit “theoretical” options. WP-A2 reframes decarbonisation as a unit-operation engineering problem with explicit constraints. The objective is to produce retrofit option sets that remain credible under reliability and product-quality requirements, and to quantify where abatement is realistically achievable versus “theoretical”.</p>
<p>Scientific 101 pointers: <code>T3.1</code> (midstream constraints) and <code>T3.12</code> (TEA/LCA/MRV sensitivity and measurement).</p>
<ul>
<li>Core questions: which abatement levers are feasible per unit operation, and what constraints (off-gas, materials, downtime) dominate feasibility?</li>
<li>Partner inputs: unit-operation energy and off-gas baselines; reliability/downtime modes; retrofit windows and “do not break” quality constraints.</li>
<li>Deliverables: abatement curves under constraints; a short retrofit shortlist for one site-relevant target; a measurement plan for a pilot trial.</li>
<li>Validation pathway: mass/energy + TEA/LCA scenario envelopes -&gt; partner review -&gt; pilotable protocol (what to measure and how often).</li>
</ul>
<h4 id="wp-a3.-slag-chemistry-and-metal-losses-value-recovery-under-operability-constraints" class="anchored">WP-A3. Slag chemistry and metal losses (value recovery under operability constraints)</h4>
<p>Small recovery improvements compound at scale, but slag design interacts with viscosity/foaming constraints and impurity capture. The research need is to quantify metal losses and operability interactions for realistic feed blends, not idealised compositions. WP-A3 targets a direct value-capture lever: reducing copper losses while staying inside operability constraints. The objective is to produce slag design envelopes and test protocols that are transferable to partner contexts, including realistic impurity suites.</p>
<p>Scientific 101 pointers: <code>T3.2</code> (slag chemistry and losses) and <code>T3.1</code> (pyro route context).</p>
<ul>
<li>Core questions: what combinations of slag chemistry and operating conditions minimize dissolved copper and entrainment losses without destabilizing furnace operation?</li>
<li>Partner inputs: representative feed compositions; current loss metrics; known operability constraints (foaming, tapping, accretions).</li>
<li>Deliverables: slag design envelopes; quantified recovery gains; a reproducible lab protocol that maps to partner KPIs.</li>
<li>Validation pathway: bench slag/matte experiments + microstructure -&gt; partner review -&gt; one pilotable slag-control hypothesis.</li>
</ul>
<h4 id="wp-a4.-bolt-on-hydromet-pre-treatment-for-risk-reduction-and-secondary-feeds" class="anchored">WP-A4. Bolt-on hydromet pre-treatment for risk reduction and secondary feeds</h4>
<p>Selective leaching and targeted pre-treatment can act as “bolt-on” risk reduction measures, particularly when impurity suites or secondary feeds constrain existing routes. The research need is to identify where such steps are technically credible and environmentally defensible in an Australian context. WP-A4 identifies and tests “bolt-on” pre-treatment steps that can improve feed flexibility and impurity tolerance without demanding a full plant redesign. The objective is a ranked set of pre-treatment flowsheets with bench evidence for selectivity and residue handling, grounded in partner integration constraints.</p>
<p>Scientific 101 pointers: <code>T3.4</code> (hydromet modules) and <code>T3.3</code> (impurity behavior and why “removal” can shift liabilities).</p>
<ul>
<li>Core questions: which selective leaching and separation steps can remove (or immobilize) target impurities while preserving copper value and producing manageable residues?</li>
<li>Partner inputs: candidate feed samples (complex concentrates and/or secondary feeds); integration constraints; residue acceptance requirements.</li>
<li>Deliverables: ranked “bolt-on” flowsheets with bench proof-of-concept; residue stability evidence; a partner-ready integration checklist.</li>
<li>Validation pathway: bench selectivity + residue handling -&gt; one pilotable pre-treatment recipe for a defined feed class.</li>
</ul>
<h4 id="mission-b-circular-copper-and-alloy-loops-complex-scrap-and-e-waste" class="anchored">Mission B: Circular copper and alloy loops (complex scrap and e-waste)</h4>
<p>Mission B targets the capability stack required to upgrade complex secondary feeds into spec-compliant copper and alloys. The research emphasis is on feed characterisation, contamination control, route selection, and measurement protocols that make circular claims defensible.</p>
<h4 id="wp-b1.-scrap-atlas-characterisation-to-processing-rules" class="anchored">WP-B1. Scrap atlas (characterisation to processing rules)</h4>
<p>Complex scrap and e-waste streams are heterogeneous; without a feed library and classification scheme, route selection is guesswork. The research need is to connect Australian-relevant feed characterisation to practical processing rules. WP-B1 builds the enabling evidence base for circular copper: a standardized Australian “scrap atlas” that connects real feed variability to processing rules and risk flags. The objective is not just characterization; it is a library and protocol set that partners can reuse when they decide whether a feed is “integratable” (and on what terms).</p>
<p>Scientific 101 pointers: <code>T3.6</code> (secondary feed characterization) and <code>T3.3</code> (contamination as an impurity-suite problem).</p>
<ul>
<li>Core questions: which feed attributes (composition distributions, form, liberation, contaminants) predict downstream compatibility and product-spec risk?</li>
<li>Evidence anchor: PCBs can reach copper contents of <strong>20-25%</strong> <span class="citation" data-cites="yang-2024">(F. Yang et al., 2024, 4)</span>, but heterogeneity and contamination dominate route choice.</li>
<li>Partner inputs: representative scrap and e-waste streams; access to sampling points and logistics constraints; downstream acceptance thresholds where available.</li>
<li>Deliverables: a first-version scrap library; standardized characterization protocols; a feed classification scheme with “processing rules” for at least one priority stream.</li>
</ul>
<h4 id="wp-b2.-decontamination-and-pre-treatment-before-integration" class="anchored">WP-B2. Decontamination and pre-treatment before integration</h4>
<p>Secondary feeds often carry plastics, halogens, organics, and problematic metals that can dominate environmental risk and downstream compatibility. The research need is to validate pre-treatment recipes and measure emissions and contaminant removal in a way that partners can trust. WP-B2 makes pre-treatment “real”: validated recipes with measured contaminant removal and emissions evidence. The objective is to produce partner-usable pre-treatment protocols that improve downstream compatibility and reduce environmental risk, with clear documentation of what was measured and what was assumed.</p>
<p>Scientific 101 pointers: <code>T3.7</code> (pre-treatment and decontamination) and <code>T3.12</code> (MRV discipline for defensible claims).</p>
<ul>
<li>Core questions: which mechanical/thermal steps remove plastics/halogens/organics at lowest cost and risk, and what emissions controls are required?</li>
<li>Evidence anchor: route choice and decarbonisation outcomes vary strongly by pathway <span class="citation" data-cites="torrubia-2024">(J. Torrubia et al., 2024, 1, 7–8)</span>.</li>
<li>Partner inputs: representative feed materials; access to pre-treatment equipment; target specifications for “smelter-compatible” or “hydromet-compatible” feed.</li>
<li>Deliverables: pre-treatment recipes + emissions characterization; compatibility specifications; a measurement protocol suitable for partner adoption.</li>
</ul>
<h4 id="wp-b3.-alloy-to-alloy-loops-and-tramp-element-management" class="anchored">WP-B3. Alloy-to-alloy loops and tramp element management</h4>
<p>Avoiding downcycling requires quantified tolerance thresholds and quality assurance methods for tramp elements. The research need is to identify feasible alloy-to-alloy windows that match downstream specifications. WP-B3 turns alloy recycling into a spec-anchored engineering problem. The objective is to quantify tramp-element thresholds and develop quality assurance and refining/dilution strategies that keep material in higher-value loops rather than downcycling.</p>
<p>Scientific 101 pointers: <code>T3.8</code> (alloy loops and tramp elements).</p>
<ul>
<li>Core questions: what tramp-element thresholds define “no downcycling” for one priority alloy system, and what refining/dilution strategies are feasible?</li>
<li>Partner inputs: alloy scrap compositions; downstream specifications and acceptance tests; realistic melt practice constraints.</li>
<li>Deliverables: tolerance thresholds; a candidate refining/dilution strategy; QA guidance and one demonstrated spec-compliant loop (bench or pilot scale).</li>
</ul>
<h4 id="wp-b4.-co-product-aware-circular-metallurgy-including-residuesanode-slime" class="anchored">WP-B4. Co-product-aware circular metallurgy (including residues/anode slime)</h4>
<p>Route viability can depend on co-product recovery and residue handling. The research need is to design circular flowsheets that do not strand value in residues and that remain environmentally defensible. WP-B4 ensures Mission B is economically and environmentally realistic under a “copper plus co-products” boundary. The objective is to design circular flowsheets that account for co-product value and residue liabilities explicitly, rather than treating residues as an afterthought.</p>
<p>Scientific 101 pointers: <code>T3.9</code> (co-products and residues) and <code>T3.1</code> (refining residues and where value concentrates).</p>
<ul>
<li>Core questions: what co-products materially affect viability for a chosen route, and what residue handling/stabilization makes the route defensible?</li>
<li>Evidence anchor: multi-metal recovery from anode slime demonstrates co-product-sensitive route importance <span class="citation" data-cites="dong-2020">(Z. Dong et al., 2020, 1, 5)</span>.</li>
<li>Partner inputs: representative residue streams (or simulated equivalents); regulatory constraints; partner risk and acceptance thresholds.</li>
<li>Deliverables: co-product-sensitive flowsheet options; residue handling pathways; a route-selection checklist that includes residue liability accounting.</li>
</ul>
<h4 id="wp-b5.-decarbonisation-scenarios-for-circular-routes-tealca-measurement" class="anchored">WP-B5. Decarbonisation scenarios for circular routes (TEA/LCA + measurement)</h4>
<p>Circular routes are not automatically low-carbon; credible comparison requires consistent boundaries, scenario analysis, and measurement protocols. The research need is to make “low-carbon circular copper” a measurable claim rather than a label. WP-B5 makes “low-carbon circular copper” defensible by building comparative TEA/LCA models with scenario and uncertainty treatment, and by producing MRV-ready measurement protocols. The objective is reusable templates and a partner-adoptable measurement plan for at least one circular route.</p>
<p>Scientific 101 pointers: <code>T3.12</code> (TEA/LCA/MFA/MRV) and <code>T3.6/T3.7</code> (secondary feed variability and pre-treatment impacts).</p>
<ul>
<li>Core questions: what boundaries and assumptions dominate conclusions for a chosen circular route, and how should measurement be designed to support credible claims?</li>
<li>Evidence anchor: comparative results and scenario analysis show meaningful sensitivity to boundaries and electricity transitions <span class="citation" data-cites="wu-2025">(X. Wu et al., 2025, 7, 9)</span>.</li>
<li>Partner inputs: route parameters and yields; energy assumptions; access to pilot measurement data where available; partner reporting requirements.</li>
<li>Deliverables: reusable TEA/LCA models; scenario sensitivity results; MRV-ready metrics and sampling plans; a partner-ready protocol.</li>
</ul>
<h4 id="mission-outputs-what-gets-built-in-practice" class="anchored">Mission outputs (what gets built, in practice)</h4>
<p>Mission A builds: impurity transfer functions and operating windows; retrofit abatement curves under constraints; slag design protocols; bolt-on pre-treatment proof points.</p>
<p>Mission B builds: an Australian scrap library and classification scheme; validated pre-treatment recipes and emissions evidence; alloy tolerance thresholds and QA guidance; co-product-aware circular flowsheet options; TEA/LCA and MRV templates that allow defensible comparison.</p>

<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-dong-2020" class="csl-entry" role="listitem">
Z. Dong, T. Jiang, B. Xu, J. Yang, Y. Chen, Q. Li, and Y. Yang 2020 <em>Comprehensive recoveries of selenium, copper, gold, silver and lead from a copper anode slime with a clean and economical hydrometallurgical process</em> Chemical Engineering Journal 395: 124762 <a href="https://doi.org/10.1016/j.cej.2020.124762">https://doi.org/10.1016/j.cej.2020.124762</a>.
</div>
<div id="ref-lane-2016" class="csl-entry" role="listitem">
D. J. Lane, N. J. Cook, S. R. Grano, and K. Ehrig 2016 <em>Selective leaching of penalty elements from copper concentrates: A review</em> Minerals Engineering 98: 110–121 <a href="https://doi.org/10.1016/j.mineng.2016.08.006">https://doi.org/10.1016/j.mineng.2016.08.006</a>.
</div>
<div id="ref-torrubia-2024" class="csl-entry" role="listitem">
J. Torrubia, A. M. Parvez, M. Sajjad, F. A. G. Paz, and K. G. van den Boogaart 2024 <em>Recovery of copper from electronic waste: An energy transition approach to decarbonise the industry</em> Journal of Cleaner Production 475: 144349 <a href="https://doi.org/10.1016/j.jclepro.2024.144349">https://doi.org/10.1016/j.jclepro.2024.144349</a>.
</div>
<div id="ref-wu-2025" class="csl-entry" role="listitem">
X. Wu, X. Yang, and F. Zhao 2025 <em>Scaling bioleaching from lab to industry: A life cycle assessment of cathode copper production</em> ACS Sustainable Chemistry &amp; Engineering 13: 16577–16587 <a href="https://doi.org/10.1021/acssuschemeng.5c06793">https://doi.org/10.1021/acssuschemeng.5c06793</a>.
</div>
<div id="ref-yang-2024" class="csl-entry" role="listitem">
F. Yang, Y. Wu, and Q. Zhang 2024 <em>Towards resource regeneration: A focus on copper recovery from electronic waste</em> Journal of Cleaner Production 474: 144286 <a href="https://doi.org/10.1016/j.jclepro.2024.144286">https://doi.org/10.1016/j.jclepro.2024.144286</a>.
</div>
</div>

<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
    tabsets.forEach(function(tabset) {
      const tabby = new Tabby('#' + tabset.id);
    });
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/Green-Metals\.github\.io\/home\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>